---
title: C6053 | Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C6053
helpviewer_keywords:
- C6053
ms.assetid: 8e25566a-e3b9-470a-820d-64221a877c53
caps.latest.revision: 27
author: corob-msft
ms.author: corob
manager: jillfra
ms.openlocfilehash: 09146f98c9f165695a198322f94ed4b386fcc971
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/02/2020
ms.locfileid: "77277449"
---
# <a name="c6053"></a>C6053
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Upozornění C6053: volání \<function> nesmí končit řetězcem nulou \<variable>  
  
 Toto upozornění znamená, že zadaná funkce byla volána takovým způsobem, že výsledný řetězec nemusí být zakončen nulou. Tato vada může způsobit zneužití nebo chybu přetečení vyrovnávací paměti. Toto upozornění je generováno také v případě, že funkce s poznámkou očekává, že řetězec ukončený hodnotou null je předán jako řetězec, který není ukončen znakem null.  
  
 Většina standardních knihoven jazyka C a funkce zpracování řetězců Win32 vyžadují a vytváří řetězce zakončené nulou. Několik "výpočetních řetězců" Functions (včetně `strncpy` , `wcsncpy` ,, `_mbsncpy` `_snprintf` a `snwprintf` ) nevytváří řetězce zakončené nulou, pokud je přesně vyplní jejich vyrovnávací paměť. V takovém případě následné volání řetězcové funkce, která očekává řetězec zakončený nulou, bude následovat po konci vyrovnávací paměti, kde je vyhledána nula. Program by měl mít jistotu, že řetězec končí nulou. Obecně byste měli předat délku "počítaného řetězce", který je menší než velikost vyrovnávací paměti, a pak explicitně přiřadit nulu k poslednímu znaku ve vyrovnávací paměti.  
  
## <a name="example"></a>Příklad  
 Následující vzorový kód vygeneruje toto upozornění:  
  
```cpp  
  
#include <string.h>  
#define MAX 15  
  
size_t f( )  
{  
  char szDest[MAX];  
  char *szSource="Hello, World!";  
  
  strncpy(szDest, szSource, MAX);    
  return strlen(szDest); // possible crash here  
}  
```  
  
## <a name="example"></a>Příklad  
 Chcete-li toto upozornění opravit, ukončete řetězec, jak je znázorněno v následujícím ukázkovém kódu:  
  
```cpp  
  
#include <string.h>  
#define MAX 15  
  
size_t f( )  
{  
  char szDest[MAX];  
  char *szSource="Hello, World!";  
  
  strncpy(szDest, szSource, MAX-1);  
  szDest[MAX-1]=0;  
  return strlen(szDest);  
}  
```  
  
## <a name="example"></a>Příklad  
 Následující vzorový kód opravuje toto upozornění pomocí funkce zabezpečené manipulace s řetězci `strncpy_s` :  
  
```cpp  
  
#include <string.h>  
#define MAX 15  
  
size_t f( )  
{  
  char szDest[MAX];  
  char *szSource= "Hello, World!";  
  
  strncpy_s(szDest, sizeof(szDest), szSource, strlen(szSource));    
  return strlen(szDest);  
}  
```  
  
 Všimněte si, že toto upozornění je někdy oznámeno na určitých idiomy zaručujících bezpečnost v praxi. Z důvodu četnosti a potenciálních důsledků této vady je analytický nástroj na základě přednosti při hledání potenciálních problémů namísto typického posunu hluku.  
  
## <a name="see-also"></a>Viz také  
 [Přehled poznámek](https://msdn.microsoft.com/2345380e-2eeb-4107-907f-6e8b809c2643)   
 [Nullterminated lze použít](https://msdn.microsoft.com/86cbc668-e134-44fa-978e-9a0d57134056)   
 [strncpy_s, _strncpy_s_l, wcsncpy_s, _wcsncpy_s_l, _mbsncpy_s, _mbsncpy_s_l](https://msdn.microsoft.com/library/a971c800-94d1-4d88-92f3-a2fe236a4546)
