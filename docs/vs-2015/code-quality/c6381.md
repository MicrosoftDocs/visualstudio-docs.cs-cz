---
title: C6381 | Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C6381
helpviewer_keywords:
- C6381
ms.assetid: c01a3040-26d4-47ac-b72d-7e1292ca435f
caps.latest.revision: 16
author: corob-msft
ms.author: corob
manager: jillfra
ms.openlocfilehash: bf6813a6a942cf96761bc89e3827f308b015acc6
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/02/2020
ms.locfileid: "77272969"
---
# <a name="c6381"></a>C6381
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Upozornění C6381: rozhraní API \<function> pro vypnutí vyžaduje platný parametr dwReason nebo lpMessage.  
  
 Toto upozornění je vydáno, pokud je volána metoda InitiateSystemShutdownEx:  
  
- Bez předání platného důvodu vypnutí (parametr dwReason). Pokud je parametr parametr dwReason nula, výchozí hodnota je nedefinované vypnutí. Ve výchozím nastavení je to také neplánované vypnutí. Pro tento parametr byste měli použít jeden z kódů důvodů vypnutí systému.  
  
- Bez předání zprávy pro vypnutí (lpMessage).  
  
  Doporučujeme, abyste při volání tohoto rozhraní API použili vhodné parametry, které správcům systému pomůžou určit příčinu vypnutí.  
  
## <a name="example"></a>Příklad  
 Následující kód vygeneruje toto upozornění, protože parametr dwReason je nula a lpMessage má hodnotu null:  
  
```  
void f()  
{  
  //...  
  BOOL bRet;  
  bRet = InitiateSystemShutdownEx( NULL,  
                                   NULL, // message  
                                   0,          
                                   FALSE,      
                                   TRUE,       
                                   0);  // shutdown reason  
  // ...  
}  
```  
  
 Chcete-li toto upozornění opravit, zadejte parametr dwReason a lpMessage, jak je znázorněno v následujícím kódu:  
  
```  
#include <windows.h>  
void f()  
{  
  //...  
  BOOL bRet;  
  bRet = InitiateSystemShutdownEx( NULL,  
                               "Hardware Failure",  // message    
                               0,          
                               FALSE,      
                               TRUE,       
                               SHTDN_REASON_MAJOR_HARDWARE ); // reason  
  // ...  
}  
```
